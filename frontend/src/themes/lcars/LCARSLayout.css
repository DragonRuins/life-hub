/* ── LCARS Layout Grid ──────────────────────────────────────────
   Defines the CSS Grid structure for the LCARS frame.
   Only applies when the LCARS theme is active.

   The frame (header, sidebar, footer, elbows) stays pinned to the
   viewport at all times.  Only the content area scrolls.

   Key: every item in the middle row (sidebar, cascade, content) needs
   min-height:0 so the 1fr track can shrink below the items' content
   size — without it, tall content forces the row open and the whole
   page scrolls instead of just the content area.
   ─────────────────────────────────────────────────────────────── */

.lcars-layout {
  display: grid;
  grid-template-columns: 200px 5px 1fr;
  grid-template-rows: 56px 1fr 36px;
  grid-template-areas:
    "elbow-tl header  header"
    "sidebar  cascade content"
    "elbow-bl footer  footer";
  height: 100dvh;
  background: #000000;
  overflow: hidden;
  /* Push content below iOS status bar in standalone PWA mode */
  padding-top: env(safe-area-inset-top, 0px);
}

.lcars-elbow-tl {
  grid-area: elbow-tl;
}

.lcars-header {
  grid-area: header;
}

/* ── Middle row items all need min-height:0 ───────────────────── */

.lcars-sidebar {
  grid-area: sidebar;
  min-height: 0;
  overflow: hidden;
}

.lcars-cascade {
  grid-area: cascade;
  min-height: 0;
  overflow: hidden;
}

.lcars-content {
  grid-area: content;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 2rem;
  background: #000000;
}

/* ── Bottom row ───────────────────────────────────────────────── */

.lcars-elbow-bl {
  grid-area: elbow-bl;
}

.lcars-footer {
  grid-area: footer;
}

/* ── Alert State Classes (Frame-Level) ────────────────────── */
/* Red Alert: elbows pulse red, header/footer bars get red glow */

.lcars-alert-red .lcars-elbow-tl,
.lcars-alert-red .lcars-elbow-bl {
  position: relative;
}

.lcars-alert-red .lcars-elbow-tl::after,
.lcars-alert-red .lcars-elbow-bl::after {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--lcars-tomato);
  border-radius: inherit;
  animation: lcars-red-alert-pulse 2s ease-in-out infinite;
  pointer-events: none;
}

.lcars-alert-red .lcars-header > div,
.lcars-alert-red .lcars-footer > div {
  animation: lcars-red-alert-glow 2s ease-in-out infinite;
}

/* Yellow Alert: elbows shift to amber, header/footer get warm glow (static) */

.lcars-alert-yellow .lcars-elbow-tl svg *,
.lcars-alert-yellow .lcars-elbow-bl svg * {
  fill: var(--lcars-butterscotch);
  transition: fill 0.5s ease;
}

.lcars-alert-yellow .lcars-header > div,
.lcars-alert-yellow .lcars-footer > div {
  box-shadow: 0 0 8px rgba(255, 153, 102, 0.2);
}

/* ── Mobile Fallback (< 768px) ─────────────────────────────── */

@media (max-width: 768px) {
  .lcars-layout {
    grid-template-columns: 1fr;
    grid-template-rows: 48px 1fr 56px;
    grid-template-areas:
      "header"
      "content"
      "footer";
  }

  .lcars-sidebar,
  .lcars-cascade,
  .lcars-elbow-tl,
  .lcars-elbow-bl {
    display: none;
  }

  .lcars-header-decor {
    display: none;
  }

  .lcars-content {
    padding: 1rem;
  }
}
