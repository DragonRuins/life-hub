/* ── LCARS Animations ──────────────────────────────────────────
   Keyframes for data cascade, pulsing, boot sequence, hover effects.
   All animations respect prefers-reduced-motion.
   ─────────────────────────────────────────────────────────────── */

/* ── Data Cascade Scroll ───────────────────────────────────── */
/* The inner container is 2x the visible height. Translating from
   -50% to 0% creates a seamless loop as the top half scrolls out
   and the identical bottom half scrolls in. */

@keyframes lcars-cascade {
  0% {
    transform: translateY(-50%);
  }
  100% {
    transform: translateY(0);
  }
}

.lcars-cascade-inner {
  animation: lcars-cascade 12s linear infinite;
}

/* ── Pulsing Status Indicator ──────────────────────────────── */

@keyframes lcars-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.3;
  }
}

.lcars-pulse {
  animation: lcars-pulse 2s ease-in-out infinite;
}

/* ── Boot Sequence Animations ──────────────────────────────── */

/* Frame draws in from center */
@keyframes lcars-boot-frame {
  0% {
    clip-path: inset(50% 50% 50% 50%);
    opacity: 0;
  }
  60% {
    clip-path: inset(0 0 0 0);
    opacity: 1;
  }
  100% {
    clip-path: inset(0 0 0 0);
    opacity: 1;
  }
}

/* Sidebar items slide in from left with stagger */
@keyframes lcars-boot-slide-in {
  0% {
    opacity: 0;
    transform: translateX(-30px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Content area fades in */
@keyframes lcars-boot-content {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

/* Boot overlay fades out */
@keyframes lcars-boot-exit {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

/* Terminal scanline sweep effect */
@keyframes lcars-scanline {
  0% {
    top: -2px;
  }
  100% {
    top: 100%;
  }
}

/* ── Sidebar Button Hover Glow ─────────────────────────────── */

.lcars-sidebar-btn {
  transition: filter 0.15s ease, opacity 0.15s ease;
}

.lcars-sidebar-btn:hover {
  filter: brightness(1.3);
}

/* ── Infrastructure Status Indicators ────────────────────── */

/* Slow pulse for live status dots (green=nominal, gold=advisory, red=alert) */
@keyframes lcars-status-glow {
  0%, 100% {
    box-shadow: 0 0 4px currentColor;
    opacity: 1;
  }
  50% {
    box-shadow: 0 0 8px currentColor, 0 0 12px currentColor;
    opacity: 0.8;
  }
}

.lcars-status-dot {
  animation: lcars-status-glow 3s ease-in-out infinite;
}

/* Scanning stripe that sweeps across a panel during auto-refresh */
@keyframes lcars-scan-stripe {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(200%);
  }
}

.lcars-scan-stripe {
  position: relative;
  overflow: hidden;
}

.lcars-scan-stripe::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(153, 204, 255, 0.10),
    transparent
  );
  animation: lcars-scan-stripe 4s ease-in-out infinite;
  pointer-events: none;
}

/* ── Panel Glow Pulse (for alert-state panels) ────────────── */

@keyframes lcars-panel-glow {
  0%, 100% { filter: drop-shadow(0 0 4px var(--lcars-glow-color, rgba(153, 204, 255, 0.15))); }
  50% { filter: drop-shadow(0 0 10px var(--lcars-glow-color, rgba(153, 204, 255, 0.25))); }
}

.lcars-panel-glow-pulse {
  animation: lcars-panel-glow 3s ease-in-out infinite;
}

/* ── Alert State Animations (Frame-Level) ────────────────── */
/* Red alert: header/footer bars glow red */

@keyframes lcars-red-alert-glow {
  0%, 100% { box-shadow: 0 0 4px var(--lcars-tomato); }
  50% { box-shadow: 0 0 12px var(--lcars-tomato), 0 0 24px rgba(255, 69, 58, 0.15); }
}

/* ── Page Route Transition ───────────────────────────────── */

.lcars-content {
  transition: opacity 150ms ease;
}

.lcars-content.lcars-page-out {
  opacity: 0;
}

/* ── Sidebar Idle Color Cycling ──────────────────────────── */
/* Each decorative block cycles through different LCARS colors at 10s */

@keyframes lcars-idle-cycle-1 {
  0%, 100% { background-color: var(--lcars-gray); }
  25% { background-color: var(--lcars-tanoi); }
  50% { background-color: var(--lcars-almond-creme); }
  75% { background-color: var(--lcars-lilac); }
}

@keyframes lcars-idle-cycle-2 {
  0%, 100% { background-color: var(--lcars-almond-creme); }
  25% { background-color: var(--lcars-african-violet); }
  50% { background-color: var(--lcars-ice); }
  75% { background-color: var(--lcars-sunflower); }
}

@keyframes lcars-idle-cycle-3 {
  0%, 100% { background-color: var(--lcars-moonlit-violet); }
  25% { background-color: var(--lcars-gold); }
  50% { background-color: var(--lcars-tanoi); }
  75% { background-color: var(--lcars-african-violet); }
}

.lcars-idle-block-1 {
  animation: lcars-idle-cycle-1 10s ease-in-out infinite;
}

.lcars-idle-block-2 {
  animation: lcars-idle-cycle-2 10s ease-in-out infinite;
  animation-delay: -3s;
}

.lcars-idle-block-3 {
  animation: lcars-idle-cycle-3 10s ease-in-out infinite;
  animation-delay: -6s;
}

/* ── Footer Digit Roll ───────────────────────────────────── */

@keyframes lcars-digit-roll {
  0% { transform: translateY(100%); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

.lcars-digit-roll {
  display: inline-block;
  animation: lcars-digit-roll 200ms ease-out;
}

/* ── Notification Comm Flash ─────────────────────────────── */
/* Double-flash amber pattern mimicking TNG incoming-comm indicator */

@keyframes lcars-comm-flash {
  0% { background-color: transparent; }
  15% { background-color: rgba(255, 170, 51, 0.3); }
  40% { background-color: transparent; }
  55% { background-color: rgba(255, 170, 51, 0.2); }
  100% { background-color: transparent; }
}

.lcars-comm-flash {
  animation: lcars-comm-flash 600ms ease-out;
}


/* ── LCARS Modern Variant Overrides ────────────────────────── */
/* Slower, subtler animations for the vibrant Modern aesthetic */

.lcars-theme.lcars-modern .lcars-cascade-inner {
  animation-duration: 16s;
}

.lcars-theme.lcars-modern .lcars-status-dot {
  animation-duration: 5s;
}

.lcars-theme.lcars-modern .lcars-scan-stripe::after {
  display: none;
}

.lcars-theme.lcars-modern .lcars-idle-block-1,
.lcars-theme.lcars-modern .lcars-idle-block-2,
.lcars-theme.lcars-modern .lcars-idle-block-3 {
  animation-duration: 14s;
}

/* ── Reduced Motion ────────────────────────────────────────── */
/* Disable all animations when user prefers reduced motion */

@media (prefers-reduced-motion: reduce) {
  .lcars-cascade-inner {
    animation: none !important;
  }

  .lcars-pulse {
    animation: none !important;
  }

  .lcars-boot-overlay {
    animation: none !important;
    display: none !important;
  }

  .lcars-status-dot {
    animation: none !important;
  }

  .lcars-scan-stripe::after {
    animation: none !important;
    display: none !important;
  }

  .lcars-panel-glow-pulse {
    animation: none !important;
  }

  /* Chunk 2: Alert states */
  .lcars-alert-red .lcars-header,
  .lcars-alert-red .lcars-footer {
    animation: none !important;
    box-shadow: none !important;
  }

  /* Chunk 3: Page transitions */
  .lcars-content {
    transition: none !important;
  }

  /* Chunk 4A: Sidebar idle cycles */
  .lcars-idle-block-1,
  .lcars-idle-block-2,
  .lcars-idle-block-3 {
    animation: none !important;
  }

  /* Chunk 4B: Footer digit roll */
  .lcars-digit-roll {
    animation: none !important;
  }

  /* Chunk 6: Comm flash */
  .lcars-comm-flash {
    animation: none !important;
  }

}
